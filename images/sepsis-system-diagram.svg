<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle">
    Sepsis AI Socio-Technical System: Feedback Loops and Drift
  </text>
  
  <!-- Patient Population -->
  <g id="patient-population">
    <rect x="50" y="80" width="200" height="120" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="10"/>
    <text x="150" y="105" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Patient Population</text>
    
    <!-- Group A -->
    <rect x="70" y="120" width="70" height="60" fill="#fff3e0" stroke="#f57c00" stroke-width="1.5" rx="5"/>
    <text x="105" y="140" font-family="Arial" font-size="12" text-anchor="middle">Group A</text>
    <text x="105" y="155" font-family="Arial" font-size="10" text-anchor="middle">30% pop</text>
    <text x="105" y="170" font-family="Arial" font-size="10" text-anchor="middle">Low risk</text>
    
    <!-- Group B -->
    <rect x="160" y="120" width="70" height="60" fill="#fce4ec" stroke="#c2185b" stroke-width="1.5" rx="5"/>
    <text x="195" y="140" font-family="Arial" font-size="12" text-anchor="middle">Group B</text>
    <text x="195" y="155" font-family="Arial" font-size="10" text-anchor="middle">70% pop</text>
    <text x="195" y="170" font-family="Arial" font-size="10" text-anchor="middle">High risk</text>
  </g>
  
  <!-- AI Model -->
  <g id="ai-model">
    <rect x="350" y="80" width="180" height="120" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="10"/>
    <text x="440" y="105" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">AI Model</text>
    <text x="440" y="130" font-family="Arial" font-size="12" text-anchor="middle">Predicts sepsis risk</text>
    <text x="440" y="150" font-family="Arial" font-size="11" text-anchor="middle" fill="#666">Calibration degrades</text>
    <text x="440" y="170" font-family="Arial" font-size="11" text-anchor="middle" fill="#666">over time</text>
    
    <!-- Retraining indicator -->
    <circle cx="510" cy="90" r="15" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
    <text x="510" y="95" font-family="Arial" font-size="10" text-anchor="middle">RT</text>
  </g>
  
  <!-- Physician Types -->
  <g id="physicians">
    <rect x="630" y="80" width="300" height="120" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="10"/>
    <text x="780" y="105" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Physician Decision Making</text>
    
    <!-- Never-takers -->
    <rect x="650" y="125" width="80" height="60" fill="#ffebee" stroke="#d32f2f" stroke-width="1.5" rx="5"/>
    <text x="690" y="145" font-family="Arial" font-size="11" text-anchor="middle">Never-takers</text>
    <text x="690" y="160" font-family="Arial" font-size="9" text-anchor="middle">A: 85%</text>
    <text x="690" y="175" font-family="Arial" font-size="9" text-anchor="middle">B: 5%</text>
    
    <!-- Always-takers -->
    <rect x="740" y="125" width="80" height="60" fill="#e8f5e9" stroke="#388e3c" stroke-width="1.5" rx="5"/>
    <text x="780" y="145" font-family="Arial" font-size="11" text-anchor="middle">Always-takers</text>
    <text x="780" y="165" font-family="Arial" font-size="9" text-anchor="middle">Both: 5%</text>
    
    <!-- Bayesian -->
    <rect x="830" y="125" width="80" height="60" fill="#e1f5fe" stroke="#0277bd" stroke-width="1.5" rx="5"/>
    <text x="870" y="145" font-family="Arial" font-size="11" text-anchor="middle">Bayesian</text>
    <text x="870" y="160" font-family="Arial" font-size="9" text-anchor="middle">Trust AI ↑</text>
    <text x="870" y="175" font-family="Arial" font-size="9" text-anchor="middle">over time</text>
  </g>
  
  <!-- Treatment Decision -->
  <g id="treatment">
    <ellipse cx="490" cy="300" rx="120" ry="50" fill="#fff9c4" stroke="#f9a825" stroke-width="2"/>
    <text x="490" y="295" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Treatment</text>
    <text x="490" y="315" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Decision</text>
  </g>
  
  <!-- Outcomes -->
  <g id="outcomes">
    <!-- Treated -->
    <rect x="150" y="420" width="160" height="100" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2" rx="10"/>
    <text x="230" y="445" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Treated Patients</text>
    <text x="230" y="465" font-family="Arial" font-size="12" text-anchor="middle">Outcome censored</text>
    <text x="230" y="485" font-family="Arial" font-size="12" text-anchor="middle">→ Label = 0</text>
    <text x="230" y="505" font-family="Arial" font-size="11" text-anchor="middle" fill="#d32f2f">(hides true risk)</text>
    
    <!-- Not treated -->
    <rect x="670" y="420" width="160" height="100" fill="#ffcdd2" stroke="#c62828" stroke-width="2" rx="10"/>
    <text x="750" y="445" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Untreated Patients</text>
    <text x="750" y="465" font-family="Arial" font-size="12" text-anchor="middle">True outcome visible</text>
    <text x="750" y="485" font-family="Arial" font-size="12" text-anchor="middle">→ Label = 0 or 1</text>
    <text x="750" y="505" font-family="Arial" font-size="11" text-anchor="middle" fill="#1976d2">(accurate labels)</text>
  </g>
  
  <!-- Training Data -->
  <g id="training-data">
    <rect x="350" y="580" width="280" height="80" fill="#f3e5f5" stroke="#6a1b9a" stroke-width="2" rx="10"/>
    <text x="490" y="605" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Training Data Pool</text>
    <text x="490" y="625" font-family="Arial" font-size="12" text-anchor="middle">Biased toward untreated outcomes</text>
    <text x="490" y="645" font-family="Arial" font-size="11" text-anchor="middle" fill="#d32f2f">Group B underrepresented in positive labels</text>
  </g>
  
  <!-- Arrows showing flow -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" fill="#666">
      <polygon points="0 0, 10 3, 0 6"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" fill="#d32f2f">
      <polygon points="0 0, 10 3, 0 6"/>
    </marker>
  </defs>
  
  <!-- Flow arrows -->
  <!-- Patients to AI -->
  <path d="M 250 140 L 350 140" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- AI to Physicians -->
  <path d="M 530 140 L 630 140" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="580" y="135" font-family="Arial" font-size="10" text-anchor="middle">Risk scores</text>
  
  <!-- Physicians to Treatment -->
  <path d="M 780 200 L 550 280" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Treatment to outcomes -->
  <path d="M 430 340 L 280 420" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="340" y="375" font-family="Arial" font-size="10" text-anchor="middle">Treat</text>
  
  <path d="M 550 340 L 700 420" stroke="#c62828" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="620" y="375" font-family="Arial" font-size="10" text-anchor="middle">No treat</text>
  
  <!-- Outcomes to training data -->
  <path d="M 230 520 L 400 580" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 750 520 L 580 580" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Feedback loop - training data to AI -->
  <path d="M 350 620 Q 100 400 350 200" stroke="#d32f2f" stroke-width="3" fill="none" marker-end="url(#arrowhead-red)" stroke-dasharray="5,5"/>
  <text x="120" y="400" font-family="Arial" font-size="14" font-weight="bold" fill="#d32f2f" transform="rotate(-90 120 400)">FEEDBACK LOOP</text>
  
  <!-- Time dimension -->
  <g id="time-dimension">
    <rect x="50" y="700" width="880" height="60" fill="#f5f5f5" stroke="#616161" stroke-width="2" rx="5"/>
    <text x="490" y="725" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Time Progression →</text>
    
    <!-- Time markers -->
    <line x1="100" y1="740" x2="880" y2="740" stroke="#616161" stroke-width="2"/>
    
    <!-- Retraining points -->
    <circle cx="200" cy="740" r="5" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
    <circle cx="350" cy="740" r="5" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
    <circle cx="500" cy="740" r="5" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
    <circle cx="650" cy="740" r="5" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
    <circle cx="800" cy="740" r="5" fill="#ffeb3b" stroke="#f57f17" stroke-width="2"/>
    
    <text x="100" y="755" font-family="Arial" font-size="10" text-anchor="middle">Start</text>
    <text x="880" y="755" font-family="Arial" font-size="10" text-anchor="middle">Drift accumulates</text>
  </g>
  
  <!-- Key insights -->
  <g id="insights">
    <rect x="960" y="300" width="220" height="200" fill="#fff" stroke="#666" stroke-width="1" rx="5"/>
    <text x="1070" y="325" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Key Dynamics</text>
    
    <text x="970" y="350" font-family="Arial" font-size="11">1. Group B (70%, high risk)</text>
    <text x="980" y="370" font-family="Arial" font-size="10">   → 95% treated</text>
    <text x="980" y="390" font-family="Arial" font-size="10">   → Labels censored</text>
    
    <text x="970" y="415" font-family="Arial" font-size="11">2. Group A (30%, low risk)</text>
    <text x="980" y="435" font-family="Arial" font-size="10">   → 15% treated</text>
    <text x="980" y="455" font-family="Arial" font-size="10">   → Labels accurate</text>
    
    <text x="970" y="480" font-family="Arial" font-size="11">3. Model learns bias from</text>
    <text x="980" y="495" font-family="Arial" font-size="10">   imbalanced labels</text>
  </g>
</svg>